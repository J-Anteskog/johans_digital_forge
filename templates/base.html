{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  {% block meta %}
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description"
    content="Professionella webbplatser, e-handelsl칬sningar och webbapplikationer. Vi skapar digitala l칬sningar som driver din verksamhet fram친t.">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.johans-digital-forge.se{{ request.path }}">
  <meta property="og:title" content="Johan's Digital Forge - Webbutveckling & Design">
  <meta property="og:description"
    content="Professionella webbplatser, e-handelsl칬sningar och webbapplikationer. Vi skapar digitala l칬sningar som driver din verksamhet fram친t.">
  <meta property="og:image" content="https://www.johans-digital-forge.se/static/images/preview-image.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:type" content="image/jpeg">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://www.johans-digital-forge.se{{ request.path }}">
  <meta property="twitter:title" content="Johan's Digital Forge - Webbutveckling & Design">
  <meta property="twitter:description" content="Professionella webbplatser, e-handelsl칬sningar och webbapplikationer.">
  <meta property="twitter:image" content="https://www.johans-digital-forge.se/static/images/preview-image.jpg">
  {% endblock %}

  <title>{% block title %}Johan's Digital Forge{% endblock %}</title>

  {% block extra_meta %}{% endblock %}

  {% block corecss %}
  <link rel="stylesheet" href="{% static 'css/base.css' %}">
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome f칬r ikoner -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/apple-touch-icon.png' %}">
  <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon-32x32.png' %}">
  <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon-16x16.png' %}">
  <link rel="manifest" href="{% static 'images/site.webmanifest' %}">
  {% endblock %}

  {% block extracss %}{% endblock %}

  {% block extra_js %}{% endblock %}

</head>

<body>
  {% include 'includes/header.html' %}

  <main>
    {% block content %}
    <!-- Page content -->
    {% endblock %}
  </main>

  {% include 'includes/footer.html' %}

  <!-- Cookie Banner -->
  <div id="cookie-banner"
    class="cookie-banner bg-dark text-white p-3 fixed-bottom hidden">
    <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
      <div>
        游꼵 Vi anv칛nder cookies f칬r att f칬rb칛ttra din upplevelse p친 sidan.
        <a href="{% url 'privacy_policy_sv' %}" class="text-warning">Integritetspolicy</a>
      </div>
      <div class="d-flex gap-2">
        <button id="reject-cookies" class="btn btn-outline-light">Neka</button>
        <button id="accept-cookies" class="btn btn-warning">Acceptera</button>
      </div>
    </div>
  </div>

  <style>
    .cookie-banner {
      z-index: 1050;
    }

    .cookie-banner.hidden {
      display: none !important;
    }
  </style>

  {% block corejs %}
  <script src="{% static 'js/base.js' %}"></script>
  <!-- Bootstrap 5 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    function loadGoogleAnalytics() {
      if (document.getElementById('ga-script')) return;
      var s = document.createElement('script');
      s.id = 'ga-script';
      s.async = true;
      s.src = 'https://www.googletagmanager.com/gtag/js?id=G-SFDS102RKB';
      document.head.appendChild(s);
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      window.gtag = gtag;
      gtag('js', new Date());
      gtag('config', 'G-SFDS102RKB', { anonymize_ip: true });
    }

    document.addEventListener("DOMContentLoaded", function () {
      const banner = document.getElementById("cookie-banner");
      const acceptBtn = document.getElementById("accept-cookies");
      const rejectBtn = document.getElementById("reject-cookies");

      const consent = localStorage.getItem("cookieConsent");

      // Ladda GA om anv칛ndaren redan accepterat
      if (consent === "accepted") {
        loadGoogleAnalytics();
      }

      // Visa banner om inget val gjorts
      if (!consent) {
        banner.classList.remove("hidden");
      }

      // Klick p친 acceptera
      acceptBtn.addEventListener("click", function () {
        localStorage.setItem("cookieConsent", "accepted");
        banner.classList.add("hidden");
        loadGoogleAnalytics();
      });

      // Klick p친 neka
      rejectBtn.addEventListener("click", function () {
        localStorage.setItem("cookieConsent", "rejected");
        banner.classList.add("hidden");
      });
    });
  </script>

  {% endblock %}
</body>

</html>