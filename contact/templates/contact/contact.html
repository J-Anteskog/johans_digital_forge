{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/contact.css' %}">
{% endblock %}

{% block content %}
<div class="fade-in-section">
  <div class="container py-5">
    
    <!-- Header -->
    <div class="section-header text-center mb-5">
      <h2 class="display-4">✉️ Kontakta mig / Contact me</h2>
      <p class="lead">
        Välj om du vill skicka en snabb fråga eller begära offert.<br>
        Choose to send a quick question or request a quote.
      </p>
    </div>

    <!-- Navigation buttons -->
    <div class="d-flex justify-content-center gap-3 mb-5">
      <a href="{% url 'contact' %}" class="btn btn-primary btn-lg active">
        <i class="fas fa-comments me-2"></i>
        Snabb fråga
      </a>
      <a href="{% url 'quote_request' %}" class="btn btn-outline-info btn-lg">
        <i class="fas fa-file-invoice me-2"></i>
        Offertförfrågan
      </a>
    </div>

    <!-- Success message -->
    {% if success %}
    <div class="alert alert-success alert-dismissible fade show" role="alert">
      <i class="fas fa-check-circle me-2"></i>
      <strong>Tack för ditt meddelande!</strong> Jag återkommer så snart jag kan.<br>
      <small>Thank you for your message! I will get back to you as soon as I can.</small>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endif %}

    <!-- Form with Contact Info -->
    <div class="row justify-content-center">
      <!-- Contact Info Card -->
      <div class="col-lg-4 mb-4 mb-lg-0">
        <div class="card shadow-lg border-0 h-100">
          <div class="card-body p-4 text-center">
            <img src="{% static 'images/johan-profile.jpg' %}"
                 alt="Johan Anteskog"
                 class="img-fluid rounded-circle mb-3"
                 style="width: 150px; height: 150px; object-fit: cover; border: 3px solid #667eea;">
            <h4 class="fw-bold mb-2">Johan Anteskog</h4>
            <p class="mb-3">Grundare & Webbutvecklare</p>

            <!-- Phone number with reveal -->
            <div class="phone-reveal-container">
              <button class="btn btn-outline-primary w-100" id="revealPhoneBtn" onclick="revealPhone()">
                <i class="fas fa-phone me-2"></i>
                Visa telefonnummer
              </button>
              <a href="tel:0720333420" class="btn btn-primary w-100 d-none" id="phoneNumber">
                <i class="fas fa-phone me-2"></i>
                072-033 34 20
              </a>
            </div>

            <hr class="my-3">
            <p class="small mb-0">
              <i class="fas fa-map-marker-alt me-2"></i>
              Baserad i Fagersta
            </p>
          </div>
        </div>
      </div>

      <!-- Form -->
      <div class="col-lg-8">
        <div class="card shadow-lg border-0">
          <div class="card-body p-4 p-md-5">
            <p class="mb-4">
              <i class="fas fa-info-circle me-2"></i>
              <small>* = Obligatoriskt fält / Required field</small>
            </p>

            <form method="post" novalidate>
              {% csrf_token %}
              {{ form|crispy }}

              <button type="submit" class="btn btn-primary btn-lg w-100 mt-4">
                <i class="fas fa-paper-plane me-2"></i>
                Skicka meddelande / Send message
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script>
    function revealPhone() {
      document.getElementById('revealPhoneBtn').classList.add('d-none');
      document.getElementById('phoneNumber').classList.remove('d-none');
    }
    </script>

  </div>
</div>
{% endblock %}